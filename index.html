<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content="Astro v5.7.10" />
    <title>Astro Basics</title>
    <link rel="stylesheet" href="/_astro/about.6OcgPvHx.css" />
    <style>
      @keyframes astroFadeInOut {
        0% {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
      }
      @keyframes astroFadeIn {
        0% {
          opacity: 0;
          mix-blend-mode: plus-lighter;
        }
        to {
          opacity: 1;
          mix-blend-mode: plus-lighter;
        }
      }
      @keyframes astroFadeOut {
        0% {
          opacity: 1;
          mix-blend-mode: plus-lighter;
        }
        to {
          opacity: 0;
          mix-blend-mode: plus-lighter;
        }
      }
      @keyframes astroSlideFromRight {
        0% {
          transform: translate(100%);
        }
      }
      @keyframes astroSlideFromLeft {
        0% {
          transform: translate(-100%);
        }
      }
      @keyframes astroSlideToRight {
        to {
          transform: translate(100%);
        }
      }
      @keyframes astroSlideToLeft {
        to {
          transform: translate(-100%);
        }
      }
      @media (prefers-reduced-motion) {
        ::view-transition-group(*),
        ::view-transition-old(*),
        ::view-transition-new(*) {
          animation: none !important;
        }
        [data-astro-transition-scope] {
          animation: none !important;
        }
      }
    </style>
  </head>
  <body>
    <main class="container mx-auto p-4 max-w-4xl">
      <h1 class="text-4xl font-bold mb-8 text-center">
        Astro Server Islands Demo
      </h1>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Server-rendered content section with server:defer -->
        <script>
          async function replaceServerIsland(id, r) {
            let s = document.querySelector(`script[data-island-id="${id}"]`);
            if (
              !s ||
              r.status !== 200 ||
              r.headers.get("content-type")?.split(";")[0].trim() !==
                "text/html"
            )
              return;
            let html = await r.text();
            while (
              s.previousSibling &&
              s.previousSibling.nodeType !== 8 &&
              s.previousSibling.data !==
                "[if astro]>server-island-start<![endif]"
            )
              s.previousSibling.remove();
            s.previousSibling?.remove();
            s.before(document.createRange().createContextualFragment(html));
            s.remove();
          }
        </script>
        <!--[if astro]>server-island-start<![endif]-->
        <div class="bg-gray-100 p-6 rounded-lg shadow-md">
          <h2 class="text-2xl font-bold mb-4">Server-Rendered Data</h2>
          <p class="mb-4 text-gray-600">Loading server data...</p>
          <div class="mt-6 space-y-4">
            <div class="bg-white/50 p-4 rounded animate-pulse">
              <h3 class="font-semibold">Random Number:</h3>
              <div class="h-5 bg-gray-200 rounded mt-1 w-20"></div>
            </div>
            <div class="bg-white/50 p-4 rounded animate-pulse">
              <h3 class="font-semibold">Server Time:</h3>
              <div class="h-5 bg-gray-200 rounded mt-1 w-64"></div>
            </div>
            <div class="bg-white/50 p-4 rounded animate-pulse">
              <h3 class="font-semibold">Your User Agent:</h3>
              <div class="h-5 bg-gray-200 rounded mt-1 w-full"></div>
            </div>
            <div class="bg-white/50 p-4 rounded animate-pulse">
              <h3 class="font-semibold">User Data:</h3>
              <div class="h-5 bg-gray-200 rounded mt-1 w-full"></div>
            </div>
          </div>
        </div>
        <link
          rel="preload"
          as="fetch"
          href="/_server-islands/ServerData?e=default&p=&s=%7B%7D"
          crossorigin="anonymous"
        />
        <script
          type="module"
          data-astro-rerun
          data-island-id="3a89eeb4-3659-4d26-a492-6a9406e1bf54"
        >
          let response = await fetch(
            "/_server-islands/ServerData?e=default&p=&s=%7B%7D"
          );
          replaceServerIsland("3a89eeb4-3659-4d26-a492-6a9406e1bf54", response);
        </script>
        <!-- Interactive client component section -->
        <div class="bg-gray-100 p-6 rounded-lg shadow-md">
          <h2 class="text-2xl font-bold mb-4">Client-Side Interactivity</h2>
          <p class="mb-2">
            Try refreshing the page - notice that all server values regenerate
            each time.
          </p>
          <div class="mt-6 space-y-4">
            <div class="bg-white p-4 rounded">
              <h3 class="font-semibold">Browser Time (Client JS):</h3>
              <p id="browser-time">Loading...</p>
            </div>
            <div class="bg-white p-4 rounded">
              <h3 class="font-semibold">Click Counter:</h3>
              <div class="flex items-center gap-4">
                <button
                  id="counter-button"
                  class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded"
                >
                  Click me
                </button>
                <span>Count: <span id="click-count">0</span></span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="mt-8 p-6 bg-gray-100 rounded-lg shadow-md">
        <h2 class="text-2xl font-bold mb-4">
          Form Submission with Server Processing
        </h2>
        <form id="demo-form" class="space-y-4">
          <div>
            <label for="name" class="block mb-1">Name:</label>
            <input
              type="text"
              id="name"
              name="name"
              class="w-full px-4 py-2 border rounded"
            />
          </div>
          <div>
            <label for="message" class="block mb-1">Message:</label>
            <textarea
              id="message"
              name="message"
              class="w-full px-4 py-2 border rounded"
              rows="3"
            ></textarea>
          </div>
          <button
            type="submit"
            class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded"
          >
            Submit
          </button>
        </form>
        <div
          id="form-response"
          class="mt-4 hidden p-4 bg-green-100 rounded"
        ></div>
      </div>
      <div class="mt-8 text-center">
        <a href="/" class="text-blue-500 hover:underline">Back to Home</a>
      </div>
    </main>
  </body>
</html>
<script type="module">
  function r() {
    const e = document.getElementById("browser-time");
    e && (e.textContent = new Date().toLocaleString());
  }
  let s = 0;
  const m = document.getElementById("counter-button"),
    c = document.getElementById("click-count");
  m &&
    c &&
    m.addEventListener("click", () => {
      s++, (c.textContent = s);
    });
  const t = document.getElementById("demo-form"),
    n = document.getElementById("form-response");
  t &&
    n &&
    t.addEventListener("submit", (e) => {
      e.preventDefault();
      const o = new FormData(t),
        i = o.get("name"),
        a = o.get("message");
      (n.innerHTML = `
            <p><strong>Form submitted successfully!</strong></p>
            <p>Name: ${i}</p>
            <p>Message: ${a}</p>
            <p>Submission time: ${new Date().toLocaleString()}</p>
          `),
        n.classList.remove("hidden"),
        t.reset();
    });
  r();
  setInterval(r, 1e3);
</script>
